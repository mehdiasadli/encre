/// @zod.import(["import { slugRegex } from '../../regex';"])
model Chapter {
  id        String    @id @default(uuid())
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  editedAt  DateTime?
  slug      String    @unique /// @zod.string.regex(slugRegex, { message: "Invalid slug" })

  deletionReason DeletionResource?
  deletedAt      DateTime?

  title       String /// @zod.string.min(2, { message: "Title must be at least 2 characters" }).max(50, { message: "Title cannot exceed 50 characters" })
  description String? /// @zod.string.max(1000, { message: "Description cannot exceed 1000 characters" })
  image       String? /// @zod.string.url({ message: "Invalid image URL" })
  content     String

  serieId String /// @zod.string.uuid({ message: "Invalid serie ID" })
  serie   Serie  @relation(fields: [serieId], references: [id], onDelete: Cascade)

  bookId String /// @zod.string.uuid({ message: "Invalid book ID" })
  book   Book   @relation(fields: [bookId], references: [id], onDelete: Cascade)

  authorId String /// @zod.string.uuid({ message: "Invalid author ID" })
  author   Author @relation(fields: [authorId], references: [id], onDelete: Cascade)

  status ResourceStatus @default(draft)

  /// @zod.number.int({ message: "Invalid order" }).min(1, { message: "Order must be at least 1" })
  order Int
  views Int @default(0)

  articles     Article[]
  characters   ChapterCharacter[]
  attachements PostAttachement[]
  comments     Comment[]
  likes        Like[]
  reads        Read[]

  @@unique([bookId, order])
  @@map("chapter")
}
