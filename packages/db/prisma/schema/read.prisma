enum ReadResource {
  book
  chapter
}

/// @zod.import(["import { slugRegex } from '../../regex';"])
model Read {
  id        String   @id @default(uuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  slug      String   @unique /// @zod.string.regex(slugRegex, { message: "Invalid slug" })

  userId String /// @zod.string.uuid({ message: "Invalid user ID" })
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  bookId String? /// @zod.string.uuid({ message: "Invalid book ID" })
  book   Book?   @relation(fields: [bookId], references: [id], onDelete: Cascade)

  chapterId String? /// @zod.string.uuid({ message: "Invalid chapter ID" })
  chapter   Chapter? @relation(fields: [chapterId], references: [id], onDelete: Cascade)

  rating Int? /// @zod.number.int({ message: "Invalid rating" }).min(1, { message: "Rating must be at least 1" }).max(5, { message: "Rating cannot exceed 5" })
  review String? /// @zod.string.max(1000, { message: "Review cannot exceed 1000 characters" })

  @@map("read")
}
